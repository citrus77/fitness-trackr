(this.webpackJsonpfitnesstrackr=this.webpackJsonpfitnesstrackr||[]).push([[0],{32:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(18),s=n.n(c),a=n(10),i=n(3),o=n.n(i),u=n(6),l=n(4),j=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,b=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,c,s,a,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,c=t.token,s=t.body,e.prev=1,a={method:r?r.toUpperCase():"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},c&&(a.headers.Authorization="Bearer ".concat(c)),e.next=6,fetch("".concat(j).concat(n),a);case 6:return i=e.sent,e.next=9,i.json();case 9:if(!(u=e.sent).error){e.next=12;break}return e.abrupt("return",{error:u.error});case 12:return e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),d=n(2),h=n(0),O=function(e){var t=e.activities,n=e.fetchActivities,c=localStorage.getItem("token"),s=Object(r.useState)(""),a=Object(l.a)(s,2),i=a[0],j=a[1],O=Object(r.useState)(""),p=Object(l.a)(O,2),x=p[0],m=p[1],v=Object(d.e)(),f=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b({url:"/activities",method:"POST",body:{name:i,description:x},token:c});case 4:if(!(r=e.sent)){e.next=11;break}return e.next=8,n();case 8:j(""),m(""),v.push("/activities");case 11:return e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[c?Object(h.jsx)("div",{className:"form-container",children:Object(h.jsxs)("form",{onSubmit:f,children:[Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Name: "}),Object(h.jsx)("input",{type:"text",placeholder:"enter activity name",value:i,onChange:function(e){j(e.target.value)}})]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Description: "}),Object(h.jsx)("input",{type:"text",value:x,placeholder:"enter activity description",onChange:function(e){m(e.target.value)}})]}),Object(h.jsx)("button",{type:"submit",children:"Add activity"})]})}):null,t?Object(h.jsxs)("div",{className:"activities",children:[Object(h.jsx)("span",{children:"Activities:"}),t.map((function(e){return Object(h.jsx)(y,{activity:e},e.id)}))]}):"Loading..."]})},p=n(12),x=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(l.a)(s,2),j=i[0],x=i[1],y=Object(r.useState)(""),k=Object(l.a)(y,2),S=k[0],N=k[1],w=Object(r.useState)(""),C=Object(l.a)(w,2),R=C[0],P=C[1],I=Object(r.useState)([]),T=Object(l.a)(I,2),A=T[0],E=T[1],D=Object(r.useState)(Number),F=Object(l.a)(D,2),U=F[0],L=F[1],_=Object(d.e)(),H=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"/routines"});case 3:return(t=e.sent)&&c(t),e.abrupt("return");case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),n=localStorage.getItem("username"),e.prev=2,!n){e.next=9;break}return e.next=6,b({url:"/users/".concat(n,"/routines"),token:"".concat(t)});case 6:(r=e.sent)&&E(r);case 9:return e.abrupt("return");case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"/activities"});case 3:return(t=e.sent)&&x(t),e.abrupt("return");case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),J={activities:j,setActivities:x,publicRoutines:n,setPublicRoutines:c,token:S,setToken:N,userId:U,setUserId:L,userName:R,setUserName:P,userRoutines:A,setUserRoutines:E,fetchActivities:G,fetchPublicRoutines:H,fetchUserRoutines:W};return Object(r.useEffect)((function(){try{G(),H(),W(),S&&W()}catch(e){console.error(e)}}),[S]),Object(r.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("username"),n=localStorage.getItem("userId");e&&N(e),t&&P(t),n&&P(n)})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"site-header",children:[Object(h.jsx)("div",{className:"logo",children:"Fitness Trac.kr"}),Object(h.jsxs)("div",{className:"link-bar",children:[Object(h.jsx)(a.b,{to:"/",className:"nav-link",children:"Home"}),Object(h.jsx)(a.b,{to:"/routines",className:"nav-link",children:"Routines"}),S?Object(h.jsx)(a.b,{to:"/user/routines",className:"nav-link",children:"My Routines"}):null,Object(h.jsx)(a.b,{to:"/activities",className:"nav-link",children:"Activities"}),S?Object(h.jsx)("button",{className:"logout",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userId"),P(""),N(""),E([]),_.push("/")},children:"Log out"}):Object(h.jsx)(a.b,{to:"/account/login",className:"nav-link",children:"Sign in"})]})]}),Object(h.jsxs)("main",{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",children:Object(h.jsx)(m,Object(p.a)({},J))}),Object(h.jsx)(d.a,{exact:!0,path:"/routines",children:Object(h.jsx)(g,Object(p.a)({},J))}),Object(h.jsx)(d.a,{exact:!0,path:"/activities",children:Object(h.jsx)(O,Object(p.a)({},J))}),Object(h.jsx)(d.a,{exact:!0,path:"/user/routines",children:Object(h.jsx)(f,Object(p.a)({},J))}),Object(h.jsx)(d.a,{exact:!0,path:"/account/:method",children:Object(h.jsx)(v,Object(p.a)({},J))})]})]})},m=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{children:"Welcome to FitnessTrac.kr"})})},v=function(e){var t=e.fetchUserRoutines,n=e.setToken,c=e.setUserName,s=e.setUserId,i=Object(r.useState)(""),j=Object(l.a)(i,2),O=j[0],p=j[1],x=Object(r.useState)(""),m=Object(l.a)(x,2),v=m[0],f=m[1],g=Object(r.useState)(""),y=Object(l.a)(g,2),k=y[0],S=y[1],N=Object(r.useState)(""),w=Object(l.a)(N,2),C=w[0],R=w[1],P=Object(d.f)(),I=Object(d.e)();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"form-container",children:[Object(h.jsx)("div",{className:"login-header",children:"register"===P.method?Object(h.jsx)("h3",{className:"header",children:"Register a new account"}):Object(h.jsx)("h3",{className:"header",children:"Login to your account"})}),Object(h.jsxs)("form",{className:"login-form",onSubmit:function(){var e=Object(u.a)(o.a.mark((function e(r){var a,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,b({url:"/users/".concat(P.method),method:"POST",body:{username:O,password:v}});case 4:if((a=e.sent).error&&R(a.error),!a.token){e.next=24;break}return i=a.token,n(i),localStorage.setItem("token",i),e.next=13,b({url:"/users/me",token:i});case 13:if(!(u=e.sent)){e.next=24;break}return c(u.username),localStorage.setItem("username",u.username),s(u.id),localStorage.setItem("userId",u.id),e.next=21,t();case 21:p(""),f(""),I.push("/user/routines");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.error(e.t0);case 29:case 30:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),children:[Object(h.jsxs)("fieldset",{className:"input-fieldset",children:[Object(h.jsx)("label",{children:"User name"}),Object(h.jsx)("input",{className:"input-field",type:"text",name:"Login Name",placeholder:"enter your user name",onChange:function(e){return p(e.target.value)}})]}),Object(h.jsxs)("fieldset",{className:"input-fieldset",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{className:"input-field",type:"password",name:"Password",placeholder:"password (min length 6 chars)",onChange:function(e){return f(e.target.value)}})]}),"register"===P.method?Object(h.jsxs)("fieldset",{className:"input-fieldset",children:[Object(h.jsx)("label",{children:"Verify Password"}),Object(h.jsx)("input",{className:"input-field",type:"password",name:"Verify Password",placeholder:"re-enter your password",onChange:function(e){return S(e.target.value)}})]}):"","register"===P.method?Object(h.jsx)("button",{className:"login-button",type:"submit",disabled:!v||!O||v.length<8||v!==k,children:"Register"}):Object(h.jsx)("button",{className:"login-button",type:"submit",disabled:!v||!O||v.length<8,children:"Login"}),"register"===P.method&&v!==k&&Object(h.jsx)("span",{className:"password-alert",children:"Passwords must match!"}),"register"===P.method&&v.length<8&&Object(h.jsx)("span",{className:"password-alert",children:"Passwords must contain at least 8 characters!"}),C?Object(h.jsx)("span",{children:C}):null,"register"===P.method?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Already have an account yet? "}),Object(h.jsx)(a.b,{to:"/account/login",className:"login-link",children:"Click here to log in!"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Already have an account yet? "}),Object(h.jsx)(a.b,{to:"/account/register",className:"login-link",children:"Click here to register!"})]})]})]})})},f=function(e){var t=e.activities,n=e.fetchPublicRoutines,c=e.fetchUserRoutines,s=e.userRoutines,a=Object(r.useState)(""),i=Object(l.a)(a,2),j=i[0],O=i[1],p=Object(r.useState)(""),x=Object(l.a)(p,2),m=x[0],v=x[1],f=Object(r.useState)(!1),g=Object(l.a)(f,2),y=g[0],S=g[1],N=Object(r.useState)(""),w=Object(l.a)(N,2),C=w[0],R=w[1],P=Object(r.useState)(Number),I=Object(l.a)(P,2),T=I[0],A=I[1],E=Object(r.useState)(Number),D=Object(l.a)(E,2),F=D[0],U=D[1],L=Object(r.useState)(Number),_=Object(l.a)(L,2),H=_[0],W=_[1],G=localStorage.getItem("token"),J=Object(d.e)(),K=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b({url:"/routines",method:"POST",body:{name:j,goal:m,isPublic:y},token:G});case 4:if((r=e.sent).error&&R(r.error),!r){e.next=18;break}return e.next=10,b({url:"/routines",token:G});case 10:return O(""),v(""),S(!1),e.next=15,n();case 15:return e.next=17,c();case 17:J.push("/user/routines");case 18:return e.abrupt("return",r);case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0);case 25:case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"/routines/".concat(t),method:"DELETE",token:G});case 3:return e.next=5,b({url:"/routines",token:G});case 5:c(),n(),J.push("/user/routines"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,b({url:"/routines/".concat(e,"/activities"),method:"POST",body:{activityId:H,count:F,duration:T},token:G});case 4:if(!(r=t.sent)){t.next=8;break}return t.next=8,c();case 8:return t.abrupt("return",r);case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"form-container",children:Object(h.jsxs)("form",{onSubmit:K,children:[Object(h.jsx)("label",{children:"Create a new routine:"}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Name: "}),Object(h.jsx)("input",{type:"text",placeholder:" enter name",onChange:function(e){O(e.target.value)}})]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Goal: "}),Object(h.jsx)("input",{type:"text",placeholder:" enter goal",onChange:function(e){v(e.target.value)}})]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Public: "}),Object(h.jsxs)("select",{placeholder:"no",onChange:function(e){S(e.target.value)},children:[Object(h.jsx)("option",{value:"false",children:"NO"}),Object(h.jsx)("option",{value:"true",children:"YES"})]})]}),Object(h.jsx)("button",{type:"submit",children:"Create Routine"}),C?Object(h.jsx)("div",{className:"password-alert",children:C}):null]})}),s.length>0?Object(h.jsxs)("div",{className:"routines",children:[Object(h.jsx)("span",{children:"Routines:"}),s.map((function(e){return Object(h.jsxs)(k,{routine:e,children:[Object(h.jsx)("button",{onClick:function(){return V(e.id)},children:"Delete routine"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Edit Routine"}),Object(h.jsxs)("form",{onSubmit:(r=e.id,function(){var e=Object(u.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b({url:"routines/".concat(r),method:"PATCH",body:{name:j,goal:m},token:G});case 4:if((s=e.sent).error&&R(s.error),!s){e.next=16;break}return O(""),v(""),S(!1),e.next=13,n();case 13:return e.next=15,c();case 15:J.push("/user/routines");case 16:return e.abrupt("return",s);case 20:e.prev=20,e.t0=e.catch(1),console.error(e.t0);case 23:case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}()),children:[Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Change name: "}),Object(h.jsx)("input",{type:"text",value:j,placeholder:e.name,onChange:function(e){return O(e.target.value)}})]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Change goal: "}),Object(h.jsx)("input",{type:"text",value:m,placeholder:e.goal,onChange:function(e){return v(e.target.value)}})]})]}),Object(h.jsx)("button",{type:"submit",children:"Submit changes"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Add activity to routine"}),Object(h.jsxs)("form",{onSubmit:B(e.id),children:[Object(h.jsx)("select",{onChange:function(e){return W(e.target.value)},children:t.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Count: "}),Object(h.jsx)("input",{type:"number",placeholder:"number of repetitions",onChange:function(e){return U(e.target.value)}})]}),Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{children:"Duration: "}),Object(h.jsx)("input",{type:"number",placeholder:"number of minutes",onChange:function(e){return A(e.target.value)}})]}),Object(h.jsx)("button",{type:"submit",children:"Add activity"})]})]})]},e.id);var r}))]}):null]})},g=function(e){var t=e.publicRoutines;return t?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"routines",children:[Object(h.jsx)("span",{children:"Routines:"}),t.map((function(e){return Object(h.jsx)(k,{routine:e},e.id)}))]})}):"Loading..."},y=function(e){var t=e.children,n=e.activity;return n?Object(h.jsxs)("div",{className:"activity-single",children:[Object(h.jsxs)("span",{children:["Name: ",n.name]}),Object(h.jsxs)("span",{children:["Description: ",n.description]}),t]}):"Loading..."},k=function(e){var t=e.children,n=e.routine;return n?Object(h.jsxs)("div",{className:"routine-single",children:[Object(h.jsx)("span",{children:Object(h.jsx)("h3",{children:n.name})}),Object(h.jsx)("span",{children:Object(h.jsxs)("h3",{className:"creator-name",children:["created by ",n.creatorName]})}),Object(h.jsxs)("span",{children:["Goal: ",n.goal]}),Object(h.jsxs)("span",{children:["Public: ",n.isPublic?"yes":"no"]}),t,n.activities.length>0&&Object(h.jsxs)("div",{className:"activities",children:[Object(h.jsx)("span",{children:"Activities:"}),Object(h.jsx)("ul",{className:"activities-list",children:n.activities.map((function(e){return Object(h.jsx)("li",{className:"activity-single",children:Object(h.jsx)(y,{activity:e,children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("span",{children:["Repetition: ",e.count," times"]}),Object(h.jsxs)("span",{children:["Duration: ",e.duration," minutes"]})]})})},e.id)}))})]})]}):"Loading..."};s.a.render(Object(h.jsx)(a.a,{children:Object(h.jsx)(x,{})}),document.querySelector("#app"))}},[[32,1,2]]]);
//# sourceMappingURL=main.dc1826e2.chunk.js.map